[gd_scene load_steps=31 format=3 uid="uid://bysjxpr0tkfu1"]

[ext_resource type="Script" uid="uid://cwhm2cwafg7eo" path="res://camera.gd" id="1_0xm2m"]
[ext_resource type="Script" uid="uid://bcjfwo7l0utc2" path="res://build/build.gd" id="1_ig7tw"]
[ext_resource type="Script" uid="uid://cxshea2chitxj" path="res://main.gd" id="1_kek77"]
[ext_resource type="Script" uid="uid://upjcky65nrwn" path="res://player.gd" id="4_1bvp3"]
[ext_resource type="Texture2D" uid="uid://bxsgub1p3jt2c" path="res://tex/freakingnatuto.png" id="5_lquwl"]
[ext_resource type="PackedScene" uid="uid://bjkfgco15fjsp" path="res://mdl/Axe.gltf" id="6_4c57u"]
[ext_resource type="Script" uid="uid://b55h5ok8v2s5s" path="res://hand.gd" id="6_efxa6"]
[ext_resource type="Texture2D" uid="uid://bi25cosltg6pl" path="res://tex/fist.png" id="8_vivmo"]
[ext_resource type="Script" uid="uid://c7imyrbfwguwo" path="res://equipable_item.gd" id="8_w48qg"]
[ext_resource type="PackedScene" uid="uid://0fc3n5w2os8h" path="res://ui.tscn" id="12_dg77c"]
[ext_resource type="Script" uid="uid://b3wmymcs1xnik" path="res://item_container.gd" id="12_ycdy4"]
[ext_resource type="Shader" uid="uid://deusiyboy5f8r" path="res://grid.gdshader" id="14_vivmo"]
[ext_resource type="Script" uid="uid://bx3ft4mal7bir" path="res://enemies.gd" id="15_2cqfq"]
[ext_resource type="PackedScene" uid="uid://o55jlkit05em" path="res://worldren/crazy_world.tscn" id="16_2cqfq"]
[ext_resource type="PackedScene" uid="uid://ci6f50w1ebtfu" path="res://animal.tscn" id="16_074og"]
[ext_resource type="AudioStream" uid="uid://cxlsf6rlj0caa" path="res://aud/wind.wav" id="16_yaehf"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_vivmo"]
transparency = 1
shading_mode = 0
albedo_color = Color(0, 0, 0, 0.541176)

[sub_resource type="PhysicalSkyMaterial" id="PhysicalSkyMaterial_5vw27"]
rayleigh_coefficient = 1.0
rayleigh_color = Color(0.419271, 0.622526, 1, 1)
mie_color = Color(0.888021, 0.797036, 0.52495, 1)
energy_multiplier = 2.0

[sub_resource type="Sky" id="Sky_1bvp3"]
sky_material = SubResource("PhysicalSkyMaterial_5vw27")

[sub_resource type="Environment" id="Environment_lquwl"]
background_mode = 2
sky = SubResource("Sky_1bvp3")
ambient_light_source = 3
ambient_light_color = Color(0.633757, 0.633757, 0.633757, 1)
ambient_light_sky_contribution = 0.9
reflected_light_source = 2
ssao_intensity = 16.0
volumetric_fog_density = 0.0001
adjustment_enabled = true

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_2cqfq"]
radius = 0.26304
height = 1.68536

[sub_resource type="BoxShape3D" id="BoxShape3D_7mycd"]
size = Vector3(2.235, 1.42, 1)

[sub_resource type="Animation" id="Animation_4c57u"]
resource_name = "AxeChop"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Hand/WoodenAxe/Model:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.233333, 0.7, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.211261, -0.525508, 0.207511), Vector3(-0.219205, -0.430524, 0.309511), Vector3(0.0925025, 1.90764, 1.28631)]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Hand")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.533333, 0.9),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [],
"method": &"_swing_sound"
}, {
"args": [],
"method": &"_at_mid_swing"
}]
}

[sub_resource type="Animation" id="Animation_vivmo"]
resource_name = "Punch"
length = 0.7
step = 0.0333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Hand/Fist:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.7),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 2.09357, 0), Vector3(0, 0, 0)]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Hand")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.133333, 0.25),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [],
"method": &"_swing_sound"
}, {
"args": [],
"method": &"_at_mid_swing"
}]
}

[sub_resource type="Animation" id="Animation_efxa6"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Hand/WoodenAxe/Model:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Hand/Fist:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_efxa6"]
_data = {
&"AxeChop": SubResource("Animation_4c57u"),
&"Punch": SubResource("Animation_vivmo"),
&"RESET": SubResource("Animation_efxa6")
}

[sub_resource type="ShaderMaterial" id="ShaderMaterial_2cqfq"]
render_priority = 0
shader = ExtResource("14_vivmo")
shader_parameter/gridlineOnEvery = 1.0
shader_parameter/lineThickness = 0.05
shader_parameter/originOffset = Vector2(0, 0)
shader_parameter/color = Color(1, 1, 1, 0.298039)
shader_parameter/pointer = Vector2(0, 0)

[sub_resource type="PlaneMesh" id="PlaneMesh_yaehf"]
material = SubResource("ShaderMaterial_2cqfq")
size = Vector2(24, 24)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7mycd"]
transparency = 1
shading_mode = 0
albedo_color = Color(1, 0, 0, 0.486275)

[sub_resource type="SphereMesh" id="SphereMesh_272bh"]
radius = 0.2
height = 0.4

[node name="Main" type="Node3D"]
script = ExtResource("1_kek77")

[node name="Camera3D" type="Camera3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(0.707107, -0.5, 0.5, 0, 0.707107, 0.707107, -0.707107, -0.5, 0.5, 5, 5, 5)
fov = 70.0
script = ExtResource("1_0xm2m")
interactable_material = SubResource("StandardMaterial3D_vivmo")

[node name="SpringCast" type="RayCast3D" parent="Camera3D"]
top_level = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_lquwl")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.412755, 0.910842, 0, -0.910842, -0.412755, 0, 0, 0)
shadow_enabled = true

[node name="Player" type="CharacterBody3D" parent="." groups=["Player"]]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.077, 10, 6.361)
collision_layer = 0
collision_mask = 17
script = ExtResource("4_1bvp3")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
shape = SubResource("CapsuleShape3D_2cqfq")

[node name="Naruto" type="Sprite3D" parent="Player"]
cast_shadow = 2
pixel_size = 0.003
billboard = 2
shaded = true
texture_filter = 0
texture = ExtResource("5_lquwl")

[node name="ShapeCast3D" type="ShapeCast3D" parent="Player"]
shape = SubResource("BoxShape3D_7mycd")
target_position = Vector3(0, 0, 1)
collision_mask = 3

[node name="AnimationPlayer" type="AnimationPlayer" parent="Player"]
libraries = {
&"": SubResource("AnimationLibrary_efxa6")
}

[node name="Hand" type="Node3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.300949, 0, 0.0446992)
script = ExtResource("6_efxa6")

[node name="WoodenAxe" type="Node3D" parent="Player/Hand"]
script = ExtResource("8_w48qg")
item_id = "wooden_axe"
metadata/_custom_type_script = "uid://c7imyrbfwguwo"

[node name="Model" parent="Player/Hand/WoodenAxe" instance=ExtResource("6_4c57u")]

[node name="Fist" type="Node3D" parent="Player/Hand"]
script = ExtResource("8_w48qg")
metadata/_custom_type_script = "uid://c7imyrbfwguwo"

[node name="Sprite3D" type="Sprite3D" parent="Player/Hand/Fist"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.558056, 0, 0)
pixel_size = 0.004
billboard = 2
texture = ExtResource("8_vivmo")

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="Player/Hand"]
max_db = -2.0

[node name="World" type="Node3D" parent="."]

[node name="Build" type="Node3D" parent="World"]
unique_name_in_owner = true
script = ExtResource("1_ig7tw")

[node name="Items" type="Node3D" parent="World"]
script = ExtResource("12_ycdy4")

[node name="CrazyWorld" parent="World" instance=ExtResource("16_2cqfq")]

[node name="BuildGrid" type="MeshInstance3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.501, 0)
visible = false
cast_shadow = 0
mesh = SubResource("PlaneMesh_yaehf")
skeleton = NodePath("../World")

[node name="3DCursor" type="MeshInstance3D" parent="."]
unique_name_in_owner = true
material_override = SubResource("StandardMaterial3D_7mycd")
mesh = SubResource("SphereMesh_272bh")

[node name="Enemies" type="Node3D" parent="."]
script = ExtResource("15_2cqfq")

[node name="SpawnTimer" type="Timer" parent="Enemies"]
autostart = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="UI" parent="CanvasLayer" instance=ExtResource("12_dg77c")]

[node name="DaBirdies" type="AudioStreamPlayer" parent="."]
stream = ExtResource("16_yaehf")
volume_db = -13.0
autoplay = true

[node name="Animal" parent="." instance=ExtResource("16_074og")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.077, 10, 6.361)

[connection signal="timeout" from="Enemies/SpawnTimer" to="Enemies" method="_on_spawn_timer_timeout"]
