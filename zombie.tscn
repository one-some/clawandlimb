[gd_scene load_steps=6 format=3 uid="uid://bqha05wdb4hvk"]

[ext_resource type="Script" uid="uid://dntu4avlviyif" path="res://enemy.gd" id="1_uiaus"]
[ext_resource type="Texture2D" uid="uid://b2ghkb0an3l84" path="res://tex/zombie.png" id="2_roy8y"]
[ext_resource type="Script" uid="uid://rv3c6nwyo3qf" path="res://enemy_pathing.gd" id="3_jmu02"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_roy8y"]
radius = 0.3
height = 1.75

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_roy8y"]
points = PackedVector3Array(0.298118, 0.559565, -0.0325898, -0.29037, -0.617422, -0.0587508, -0.268213, -0.677982, -0.085681, 0.119603, -0.608331, 0.271723, -0.212945, 0.694007, 0.172658, 0.0693717, -0.612715, -0.288114, -0.135397, 0.615148, -0.263594, 0.122535, 0.728073, 0.226574, 0.253422, -0.730585, -0.033572, -0.159286, -0.633937, 0.246452, 0.147694, 0.723815, -0.214171, -0.0325898, 0.559565, 0.298118, -0.268213, 0.677982, -0.085681, -0.0875795, -0.851855, 0.0720806, 0.26467, -0.518301, 0.141253, 0.239922, -0.542711, -0.179482, -0.183418, -0.604614, -0.233796, -0.0878975, 0.854762, -0.0611966, -0.284295, -0.579641, 0.0937364, 0.194902, 0.631114, 0.220141, 0.144435, 0.6061, -0.259636, -0.060253, -0.816284, -0.165606, 0.202953, 0.789539, 0.0450233, -0.284299, 0.579649, 0.0937375, -0.206277, 0.573209, 0.217388, 0.298118, -0.559565, -0.0325898, 0.097482, -0.814463, 0.150011, -0.255708, 0.54739, -0.1562, -0.0587508, 0.617422, -0.29037, 0.268764, 0.576595, -0.132286, 0.271723, 0.608331, 0.119603, -0.0325898, -0.559565, 0.298118)

[node name="Zombie" type="CharacterBody3D" groups=["Enemy"]]
collision_layer = 2
script = ExtResource("1_uiaus")

[node name="Sprite3D" type="Sprite3D" parent="."]
pixel_size = 0.003
billboard = 2
shaded = true
texture = ExtResource("2_roy8y")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
visible = false
mesh = SubResource("CapsuleMesh_roy8y")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("ConvexPolygonShape3D_roy8y")

[node name="RayCast3D" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.353021, 0)

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
target_desired_distance = 0.5
avoidance_enabled = true
radius = 1.0
script = ExtResource("3_jmu02")

[node name="PathTimer" type="Timer" parent="NavigationAgent3D"]
autostart = true

[node name="AttackCooldownTimer" type="Timer" parent="."]

[connection signal="velocity_computed" from="NavigationAgent3D" to="NavigationAgent3D" method="_on_velocity_computed"]
[connection signal="timeout" from="AttackCooldownTimer" to="." method="_on_attack_cooldown_timer_timeout"]
